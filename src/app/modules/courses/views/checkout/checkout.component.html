
<section class="courses-jumbotron-section">
  <div class="jumbotron-wrapper">
    <div class="jumbotron-wrapper-overlay">
      <div class="jumbotron-conatiner">
        <div class="jumbotron-texts">
          <div class="jumbotron-title">Checkout</div>
          <div class="jumbotron-description">
            You are just one step away from knowledge!
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="cart-section">
  <div class="cart-container">
    <div class="shopping-container">
      <main id="main" class="payment-info loading">
        <div class="title">Payment Info</div>
        <div class="form-container">
          <form id="payment-form">
            <p class="instruction"><span>Complete</span> your shipping and payment details below</p>
            <section>
              <h2>Shipping &amp; Billing Information</h2>
              <fieldset class="with-state">
                <label>
                  <span>Name</span>
                  <input name="name" class="field" placeholder="Jenny Rosen" required>
                </label>
                <label>
                  <span>Email</span>
                  <input name="email" type="email" class="field" placeholder="jenny@example.com" required>
                </label>
                <label>
                  <span>Phone</span>
                  <input name="phone" type="number" class="field" placeholder="+52 1 55 5555 5555" required>
                </label>
                <label>
                  <span>Address</span>
                  <input name="address" class="field" placeholder="185 Berry Street Suite 550">
                </label>
                <label class="city">
                  <span>City</span>
                  <input name="city" class="field" placeholder="San Francisco">
                </label>
                <label class="state">
                  <span>State</span>
                  <input name="state" class="field" placeholder="CA">
                </label>
                <label class="zip">
                  <span>ZIP</span>
                  <input name="postal_code" class="field" placeholder="94107">
                </label>
                <label class="select">
                  <span>Country</span>
                  <div id="country" class="field US">
                    <select name="country">
                      <!-- <option value="AU">Australia</option>
                      <option value="AT">Austria</option>
                      <option value="BE">Belgium</option>
                      <option value="BR">Brazil</option>
                      <option value="CA">Canada</option>
                      <option value="CN">China</option>
                      <option value="DK">Denmark</option>
                      <option value="FI">Finland</option>
                      <option value="FR">France</option>
                      <option value="DE">Germany</option>
                      <option value="HK">Hong Kong</option>
                      <option value="IE">Ireland</option>
                      <option value="IT">Italy</option>
                      <option value="JP">Japan</option>
                      <option value="LU">Luxembourg</option>
                      <option value="MY">Malaysia</option> -->
                      <option value="MX" selected="selected">Mexico</option>
                      <!-- <option value="NL">Netherlands</option>
                      <option value="NZ">New Zealand</option>
                      <option value="NO">Norway</option>
                      <option value="PL">Poland</option>
                      <option value="PT">Portugal</option>
                      <option value="SG">Singapore</option>
                      <option value="ES">Spain</option>
                      <option value="SE">Sweden</option>
                      <option value="CH">Switzerland</option>
                      <option value="GB">United Kingdom</option>
                      <option value="US">United States</option> -->
                    </select>
                  </div>
                </label>
              </fieldset>
              <p class="tip">Select another country to see different payment options.</p>
            </section>
            <section>
              <h2>Payment Information</h2>
              <nav id="payment-methods">
                <ul>
                  <li>
                    <input type="radio" name="payment" id="payment-card" value="card" checked>
                    <label for="payment-card">Card</label>
                  </li>
                  <li>
                    <input type="radio" name="payment" id="payment-ach_credit_transfer" value="ach_credit_transfer" checked>
                    <label for="payment-ach_credit_transfer">Bank Transfer</label>
                  </li>
                  <li>
                    <input type="radio" name="payment" id="payment-alipay" value="alipay">
                    <label for="payment-alipay">Alipay</label>
                  </li>
                  <li>
                    <input type="radio" name="payment" id="payment-bancontact" value="bancontact">
                    <label for="payment-bancontact">Bancontact</label>
                  </li>
                  <li>
                    <input type="radio" name="payment" id="payment-eps" value="eps">
                    <label for="payment-eps">EPS</label>
                  </li>
                  <li>
                    <input type="radio" name="payment" id="payment-ideal" value="ideal">
                    <label for="payment-ideal">iDEAL</label>
                  </li>
                  <li>
                    <input type="radio" name="payment" id="payment-giropay" value="giropay">
                    <label for="payment-giropay">Giropay</label>
                  </li>
                  <li>
                    <input type="radio" name="payment" id="payment-multibanco" value="multibanco">
                    <label for="payment-multibanco">Multibanco</label>
                  </li>
                  <li>
                    <input type="radio" name="payment" id="payment-p24" value="p24">
                    <label for="payment-p24">Przelewy24</label>
                  </li>
                  <li>
                    <input type="radio" name="payment" id="payment-sepa_debit" value="sepa_debit">
                    <label for="payment-sepa_debit">SEPA Direct Debit</label>
                  </li>
                  <li>
                    <input type="radio" name="payment" id="payment-sofort" value="sofort">
                    <label for="payment-sofort">SOFORT</label>
                  </li>
                  <li>
                    <input type="radio" name="payment" id="payment-wechat" value="wechat">
                    <label for="payment-wechat">WeChat Pay</label>
                  </li>
                  <li>
                    <input type="radio" name="payment" id="payment-au_becs_debit" value="au_becs_debit">
                    <label for="payment-au_becs_debit">BECS Direct Debit</label>
                  </li>
                </ul>
              </nav>
              <div class="payment-info card visible">
                <fieldset>
                  <label>
                    <span>Card</span>
                    <div id="card-element" class="field"></div>
                  </label>
                </fieldset>
              </div>
              <div class="payment-info sepa_debit">
                <fieldset>
                  <label>
                    <span>IBAN</span>
                    <div id="iban-element" class="field"></div>
                  </label>
                </fieldset>
                <p class="notice">By providing your IBAN and confirming this payment, you’re authorizing Payments Demo and Stripe, our payment
                  provider, to send instructions to your bank to debit your account. You’re entitled to a refund under the terms
                  and conditions of your agreement with your bank.</p>
              </div>
              <div class="payment-info ideal">
                <fieldset>
                  <label>
                    <span>iDEAL Bank</span>
                    <div id="ideal-bank-element" class="field"></div>
                  </label>
                </fieldset>
              </div>
              <div class="payment-info redirect">
                <p class="notice">You’ll be redirected to the banking site to complete your payment.</p>
              </div>
              <div class="payment-info receiver">
                <p class="notice">Payment information will be provided after you place the order.</p>
              </div>
              <div class="payment-info wechat">
                <div id="wechat-qrcode"></div>
                <p class="notice">Click the button below to generate a QR code for WeChat.</p>
              </div>
              <div class="payment-info au_becs_debit">
                <fieldset>
                  <label>
                    <span>Bank Account</span>
                    <div id="becs-bank-element" class="field"></div>
                  </label>
                </fieldset>
                <p class="notice">By providing your bank account details and confirming this payment, you agree to this Direct Debit Request and 
                  the Direct Debit Request service agreement, and authorise Stripe Payments Australia Pty Ltd ACN 160 180 343 Direct Debit User ID 
                  number 507156 (“Stripe”) to debit your account through the Bulk Electronic Clearing System (BECS) on behalf of Stripe Payments Demo 
                  (the “Merchant”) for any amounts separately communicated to you by the Merchant. You certify that you are either an account 
                  holder or an authorised signatory on the account listed above.</p>
              </div>
            </section>
            <button class="payment-button" type="submit">
              <div class="spinner hidden" id="spinner"></div>
              <span id="button-text">Pay {{ total | currency: 'NGN':'symbol-narrow' }}</span>
            </button>
          </form>
          <div id="card-errors" class="element-errors"></div>
          <div id="iban-errors" class="element-errors"></div>
          <div id="becs-errors" class="element-errors"></div>
          <p *ngIf="showSuccesfullMessage" class="result-message">
            Payment succeeded.
          </p>
          <div class="secure-connection-container">
            <mat-icon>lock</mat-icon>
            <div class="labels-container">
              <div>Secure</div>
              <div>Connection</div>
            </div>
          </div>
        </div>
        <div id="confirmation">
          <div class="status processing">
            <h1>Completing your order…</h1>
            <p>We’re just waiting for the confirmation from your bank… This might take a moment but feel free to close this page.</p>
            <p>We’ll send your receipt via email shortly.</p>
          </div>
          <div class="status success">
            <h1>Thanks for your order!</h1>
            <p>Woot! You successfully made a payment with Stripe.</p>
            <p class="note">We just sent your receipt to your email address, and your items will be on their way shortly.</p>
          </div>
          <div class="status receiver">
            <h1>Thanks! One last step!</h1>
            <p>Please make a payment using the details below to complete your order.</p>
            <div class="info"></div>
          </div>
          <div class="status error">
            <h1>Oops, payment failed.</h1>
            <p>It looks like your order could not be paid at this time. Please try again or select a different payment option.</p>
            <p class="error-message"></p>
          </div>
        </div>
      </main>
      <div class="checkout-card">
        <div class="total-label">Total:</div>
        <div class="total">{{ total | currency: 'NGN':'symbol-narrow' }}</div>
        <div *ngIf="total !== subtotal" class="subtotal">
          {{ subtotal | currency: 'NGN':'symbol-narrow' }}
        </div>
      </div>
    </div>
    <div class="order-summary">
      <div class="title">Your order</div>
      <div *ngFor="let course of cart; let i = index" class="course-item">
        <div
          class="course-image focus-outline"
          tabindex="0"
          [routerLink]="['/courses', course.id]"
          [style.backgroundImage]="'url(' + course.imgUrl + ')'"
        ></div>
        <div class="course-details">
          <div class="course-name focus-outline" tabindex="0" [routerLink]="['/courses', course.id]">{{ course.name }}</div>
          <div class="category-container">
            <div
              class="category-color-indicator"
              [style.backgroundColor]="course.category.hexColor"
            ></div>
            <div class="category-name">{{ course.category.name }}</div>
          </div>
        </div>
        <div class="action-items">
          <a class="focus-outline"
            tabindex="0"
            (click)="onRemoveCourseFromCart(course)"
            (keyup.enter)="onRemoveCourseFromCart(course)">
            Remove
          </a>
        </div>
        <div class="price-container">
          <div class="price">
            {{
              course.price * (1 - course.discount)
                | currency: 'NGN':'symbol-narrow'
            }}<i class="material-icons">
              local_offer
            </i>
          </div>
          <div *ngIf="course.discount > 0" class="discount-container">
            <div class="list-price">
              {{ course.price | currency: 'NGN':'symbol-narrow' }}
            </div>
            <div class="discount">{{ course.discount * 100 }}% off</div>
          </div>
        </div>
      </div>
      <div *ngFor="let course of cart; let i = index" class="course-item-small">
        <div class="upper">
          <div
            class="course-image focus-outline"
            tabindex="0"
            [routerLink]="['/courses', course.id]"
            [style.backgroundImage]="'url(' + course.imgUrl + ')'"
          ></div>
          <div class="course-details">
            <div>
              <div class="course-name focus-outline" tabindex="0" [routerLink]="['/courses', course.id]">{{ course.name }}</div>
              <div class="category-container">
                <div
                  class="category-color-indicator"
                  [style.backgroundColor]="course.category.hexColor"
                ></div>
                <div class="category-name">{{ course.category.name }}</div>
              </div>
            </div>
            <div class="price-container">
              <div class="price">
                {{
                  course.price * (1 - course.discount)
                    | currency: 'NGN':'symbol-narrow'
                }}<i class="material-icons">
                  local_offer
                </i>
              </div>
              <div *ngIf="course.discount > 0" class="discount-container">
                <div class="list-price">
                  {{ course.price | currency: 'NGN':'symbol-narrow' }}
                </div>
                <div class="discount">{{ course.discount * 100 }}% off</div>
              </div>
            </div>
          </div>
        </div>
        <div class="lower">
          <div class="action-items">
            <a
              class="focus-outline"
              tabindex="0"
              (click)="onRemoveCourseFromCart(course)"
              (keyup.enter)="onRemoveCourseFromCart(course)"
              >Remove</a
            >
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<div class="spinner-overlay" *ngIf="showProgressSpinner">
  <mat-spinner aria-label="progress indicator"></mat-spinner>
</div>
