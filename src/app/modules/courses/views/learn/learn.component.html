<section class="lerning-header">
  <div class="tabs-container">
    <div class="course-title">{{ course.name }}</div>
  </div>
</section>

<div class="column-container">
  <div class="content-container">
    <div class="content">
      <router-outlet></router-outlet>
    </div>
    <div class="tabs-container">
      <a
        class="tab-selector focus-outline"
        [class.active]="currentTab === 'about'"
        (click)="currentTab = 'about'"
        tabindex="0"
        [routerLink]="['./']"
        fragment="about"
      >
        About
      </a>
      <a
        class="tab-selector focus-outline"
        [class.active]="currentTab === 'lessons'"
        (click)="currentTab = 'lessons'"
        tabindex="0"
        [routerLink]="['./']"
        fragment="lessons"
      >
        Lessons
      </a>
      <a
        class="tab-selector focus-outline"
        [class.active]="currentTab === 'reviews'"
        (click)="currentTab = 'reviews'"
        tabindex="0"
        [routerLink]="['./']"
        fragment="reviews"
      >
        Reviews
      </a>
      <a
        *ngIf="showCertificateTab"
        class="tab-selector focus-outline"
        [class.active]="currentTab === 'certificate'"
        (click)="currentTab = 'certificate'"
        tabindex="0"
        [routerLink]="['./']"
        fragment="certificate"
      >
        Certificate
      </a>
    </div>
    <div class="tab-content-container">
      <!-- About tab content -->
      <div *ngIf="currentTab === 'about'" class="tab tab-about">
        <div class="description-title">Description</div>
        <div class="description-content" [innerHTML]="course.overview"></div>
      </div>
      <!-- Lessons tab content -->
      <div *ngIf="currentTab === 'lessons'" class="tab tab-lessons">
        <div class="lessons-title">{{ course.lessons.length }} lessons</div>
        <div class="lessons-container">
          <div
            class="lesson-card"
            *ngFor="let lesson of course.lessons; let i = index"
          >
            <app-lesson-card
              [lesson]="lesson"
              [lessonNumber]="i + 1"
            ></app-lesson-card>
          </div>
        </div>
      </div>
      <!-- Reviews tab content -->
      <div *ngIf="currentTab === 'reviews'" class="tab tab-reviews">
        <div class="reviews-title">{{ course.totalReviews }} reviews</div>
        <div class="reviews-container">
          <div
            class="review-card"
            *ngFor="let review of course.reviews; let i = index"
          >
            <app-review-card
              [review]="review"
              [reviewNumber]="i + 1"
            ></app-review-card>
          </div>
        </div>
      </div>
      <!-- Certificate tab content -->
      <div *ngIf="currentTab === 'certificate'" class="tab tab-certificate">
        <div style="width: 50px; height: 50px; background-color: blue;"></div>
      </div>
    </div>
  </div>
  <div class="sidebar-container">
    <div class="sidebar">
      <div class="sidebar-header">Course content</div>
      <div class="lesson-card-container">
        <div *ngFor="let lesson of course.lessons; let i = index">
          <div class="lesson-container">
            <div class="left">
              <i *ngIf="lessonCompleted(lesson.id)" class="material-icons">
                check_box
              </i>
              <i *ngIf="!lessonCompleted(lesson.id)" class="material-icons">
                check_box_outline_blank
              </i>
            </div>
            <div class="middle">
              <div class="number-title-container">
                <div>.{{ i + 1 }}</div>
                <a>{{ lesson.title }}</a>
              </div>
              <div class="type-duration-container">
                <div class="type">
                  <i *ngIf="lesson.type === 'DOCUMENT'" class="material-icons">
                    insert_drive_file
                  </i>
                  <i *ngIf="lesson.type === 'ARTICLE'" class="material-icons">
                    subject
                  </i>
                  <i *ngIf="lesson.type === 'VIDEO'" class="material-icons">
                    ondemand_video
                  </i>
                </div>
                <div class="duration">
                  <div *ngIf="lesson.type === 'VIDEO'" class="lesson-duration">
                    {{ lesson.fileDuration | readTime }}
                    <i class="material-icons">
                      access_time
                    </i>
                  </div>
                  <div *ngIf="lesson.type !== 'VIDEO'" class="lesson-readtime">
                    {{ lesson.readTime | readTime }}
                    <i class="material-icons">
                      menu_book
                    </i>
                  </div>
                </div>
              </div>
            </div>
            <div class="right"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<section *ngIf="relatedCourses.length > 0" class="courses-section">
  <div class="courses-container">
    <div class="title-container">
      <div class="title">You might also be interested in</div>
      <a>View all</a>
    </div>
    <div class="cards-container">
      <div
        class="course-card"
        *ngFor="let course of relatedCourses; let i = index"
      >
        <app-course-card [course]="course"></app-course-card>
      </div>
    </div>
  </div>
</section>
